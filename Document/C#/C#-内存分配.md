# C#中的内存分配
在设备上受到设备位数限制，每一个进程都会被分配对应位数的内存空间（例如：X86_64 会给每个进程分配最大8TB的内存空间，X86_32只会分配2G的内存空间）。在C#端会将分配下来的内存空间划分为栈内存空间和堆内存空间。
## 栈
在栈内存空间中，分配方式是先进后出的分配模式，是从大地址向低地址拓展的内存空间。栈内存空间用来存储局部变量和函数的参数，当函数执行完之后，这些分配在栈上的内容就会被清除。栈内存空间是有大小限制的，当写代码出现死循环或者使用较大的内存块的时候会出现爆栈的情况。
## 堆
堆内存空间是一种动态分配的内存空间，是由低地址向高地址拓展的内存空间，堆内存空间会受到CLR（垃圾机制）管理。

## 静态区和常量区
变量声明还是存在与栈中，但是具体的数据是存放在这个区内，这个区会在程序停止运行之后清除。

## 代码区

## 值类型
包括基本类型（如int、float、double、bool）和结构体（struct）,他们分配内存是在栈中直接分配数据。但是当这个值类型定义在引用类型的全局变量中时，他会在堆中分配大小，这个堆指向的时创建这个class的时候所创建的堆大小。在发生参数传递的时候不会其实是copy了一份新的内容传递的，不会影响原值。

## 引用类型
class类型全部时引用类型。引用类型在使用new的时候才会在栈中分配一个地址，这个地址指向堆中的一块内存空间。当在发生传递参数的时候，传递的内容是这个内存空间的地址，也就是说。引用类型中的值可以在任意地方直接进行修改。若在传参的时候不想被修改就需要使用深拷贝的方式。